<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


<style>
  #body{
        width:100%;
		display:flex;
		justify-content:center;
		align-items:center;
		padding-top:50px;
		padding-bottom:50px;
	}
	#mainDiv{
		color:black;
		background:white;
		width:100%;
		border:3px solid transparent;
		border-radius:10px;
		display:flex;
		flex-direction:column;
		justify-content:space-around;
		align-items:center;
	}
  /* body {
    font-family: 'Montserrat';
  } */

   .enddiv{
     background-image: url("harvesting.png");
     background-size: cover;
     overflow: hidden;
     color: black;
   }

  .img-fluid {
    width: 65%;

    height: auto;
  }

  @media (max-width: 500px) {
    .card {
      text-align: center;
      padding: 5px;

    }
  }

  @media (max-width: 500px) {
    .img-fluid {
      width: 100%;
      height: auto;
    }
  }

  @media (max-width: 500px) {
    .container {
      text-align: center;
      align-items: center;
      justify-content: center;

    }
  }

  @media (max-width: 500px) {
    .page2 {
      display: block;
      text-align: center;
    }

    @media (max-width: 500px) {
      .form-control {
        text-align: center;

      }



    }

    .form-grp2 {
      justify-content: center;
      padding: auto;
    }

  }



  .card {
    background-color: #9e9e9e;
    border: 1px solid #333;
    border-radius: 0.5rem;
    padding: 0.5rem;
    height: 100vh;
    width: 100%;
    margin: 0;
    animation: fade 250ms ease-in-out forwards;
  }

  .page {
    height: 100vh;
    display: flex;
    margin: auto;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: white;
    background-color: "#9e9e9e";
  }

  .page2 {

    height: 100vh;
    /* display: flex; */
    flex-direction: row;
    /* justify-content: center; */
    align-items: center;
    color: white;
    background-color: "#9e9e9e";
  }

  .button {
    display: table-cell;
    background-color: #68cbc1;
    color: white;
    /* // width: "100%", */
    max-width: 250px;
    /* // display: "flex", */
    font-weight: 700;
    border-style: none;
    padding: 1em;
    border-radius: 999px 999px 999px 999px;
    box-shadow: 0px 5px 15px 0px rgb(39 48 112 / 51%);
  }

  .form-group {
    display: flex;
    justify-content: center;
    /* flex-direction: column; */
    margin-bottom: 0.5rem;
    gap: 0.25em;
  }

  .form-grp2 {
    display: flex;
    flex-direction: row;
    align-items: center;
    /* flex-direction: column; */
    margin-bottom: 0.5rem;
    gap: 0.25em;
  }

  .form-group:last-child {
    margin: 0;
  }

  .form-group>label {
    font-weight: bold;
    font-size: 0.8em;
    color: #333;
  }

  .form-group>input {
    border: 1px solid #333;
    border-radius: 0.25em;
    font-size: 1rem;
    padding: 0.25em;
  }

  .step-title {
    margin: 0;
    margin-bottom: 1rem;
    /* text-align: center; */
    color: white;
  }

  .card.active {
    animation: slide 250ms 125ms ease-in-out both;
  }

  .multi-step-form {
    overflow: hidden;
    position: relative;
  }

  .mapleft {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .mapbutton {
    display: none;
    /* @media (max-width: 768px) {
  display: block;
} */
  }

  .roofbutton{
      display: none;
  }
  

  @media screen and (max-width: 768px) {
    .mapbutton {
      display: block;
    }
    .roofbutton{
      display: block;
    }

    .roofbutton2{
      display:none;
    }

  }

  .hide {
    display: none;
  }

  @keyframes slide {
    0% {
      transform: translateX(200%);
      opacity: 0;
    }

    100% {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes fade {
    0% {
      transform: scale(1);
      opacity: 1;
    }

    50% {
      transform: scale(0.75);
      opacity: 0;
    }

    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
</style>



<form data-multi-step class="multi-step-form">
  

  <div class="card page" data-step>
    <h1 class="step-title">See how much water you save in a year</h1>

    <button class="button btn btn-secondary" type="button" data-next>Explore</button>
  </div>


<!-- div 2 -->
  <div class="card page row" data-step>
    <div class="container mx-auto text-center align-items-center col-md-4 col-sm-12 mapleft">
      <h1 class="step-title ">Enter Rooftop Area</h1>
      <br>
      <img class="img-fluid roofbutton" src="houseimg.png" alt="">

      <input   id="ifield"  class="form-control input-normal"   placeholder="Area (sq feet)">
      <!-- <input  class=" form-control   col-7 text-center mx-auto " type="number" placeholder="Area (sq feet)"> -->
      <br>
      <br>
      <br>

      <div class="form-grp2">
        <button type="button" class="button" data-previous>CONTINUE BACK</button>
        <button type="button" class="button" onclick="getval()" data-next>CONTINUE NEXT</button>
      </div>

      <!-- <button type="button" class="button " data-previous>CONTINUE BACK</button>
      <button type="button" class="button" onclick="getval()" data-next>CONTINUE NEXT</button> -->

      <br><br>
      <br>
    </div>
   
      <img class="img-fluid roofbutton2" src="houseimg.png" alt="">
      

    </div>
    
 

<!-- div 2 ends -->


  <div class="card" data-step>

    <div class="row">

      <div class="col-md-6 col-sm-12 mapleft" style="height: 100vh;">
       
        <h1 class="step-title ">Select Your City</h1>

        <div class="form-group">
          <div class="input-group mb-3 ">
            <div class="input-group-prepend">
              <label class="input-group-text" for="inputGroupSelect01">City</label>
            </div>
            <select class="custom-select" onchange="changeLanguage(this.value)" id="inputGroupSelect01">
              <option selected>Choose Your City</option>
              <option value="1">One</option>
              <option value="2">Two</option>
              <option value="3">Three</option>
            </select>
          </div>
        </div>

        <button type="button" class="button mapbutton" onclick="maphide()">SELECT FROM MAP</button>
        <br />
        <div id="map2" style=" 
      display: none;
      align-items: center;
      justify-content: center;
      height:500px;
      width: 500px;
      z-index: 1000
    ">

        </div>


        <div class="form-grp2">
          <button type="button" class="button" data-previous>CONTINUE BACK</button>
          <button type="button" class="button" onclick="change()" data-next>CONTINUE NEXT</button>
        </div>

      </div>

      <div id="map" class="col-sm-6">

      </div>



    </div>

  </div>

  <div class="card page enddiv" data-step>
    
    <div

     id="lastpage"
     style="position:absolute;
       color:black;
       right:85px;
       bottom: 400px;
       font-weight: 600;
       width: 300px;
     "

    >
      <h3>
      Hurray!!
      <br/>
      You saved around 80 liters
     </h3>
    </div>
   <button class="button btn btn-secondary" type="submit">Go back</button>
 </div>
  

</form>



<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
  integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
  crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
  integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
  crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"
  integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
  crossorigin="anonymous"></script>

<script>
  let val;
  function getval(){
    val=document.getElementById("ifield").value;
    console.log(val);
  }

  function maphide() {
    document.getElementById("map2").style.display = "flex";
  }

  function initmap() {

    var location = { lat: 21.145800, lng: 79.088158 };
    var map = new google.maps.Map(document.getElementById("map"), {
      zoom: 5,
      center: location
    });

    var map2 = new google.maps.Map(document.getElementById("map2"), {
      zoom: 5,
      center: location
    });

    cities.map((city) => {
      var marker = new google.maps.Marker({
        position: {
          lat: city.geometry[0],
          lng: city.geometry[1]
        },
        map: map
      });
      marker.addListener("click", () => {
        ccity = city.Name;

        document.getElementById("inputGroupSelect01").value = ccity;
        console.log(ccity);
      });
    })


    cities.map((city) => {
      var marker = new google.maps.Marker({
        position: {
          lat: city.geometry[0],
          lng: city.geometry[1]
        },
        map: map2
      });
      marker.addListener("click", () => {
        ccity = city.Name;

        document.getElementById("inputGroupSelect01").value = ccity;
        document.getElementById("map2").style.display = "none";
        console.log(ccity);
      });
    })


  }





  let ccity = "lol";
  google.maps.event.addDomListener(marker, 'click', function () {
    // ccity=city
    console.log(ccity, "love iyt")
  });
</script>

<script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC5Aso4gf3WsHfCVgP8kDm3jKN0Pz1po0Y&&callback=initmap">

  </script>
<!-- <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC5Aso4gf3WsHfCVgP8kDm3jKN0Pz1po0Y&&callback=initmap2">

</script> -->

<script>

  const multiStepForm = document.querySelector("[data-multi-step]")
  const formSteps = [...multiStepForm.querySelectorAll("[data-step]")]
  let currentStep = formSteps.findIndex(step => {
    return step.classList.contains("active")
  })

  if (currentStep < 0) {
    currentStep = 0
    showCurrentStep()
  }

  multiStepForm.addEventListener("click", e => {
    let incrementor
    if (e.target.matches("[data-next]")) {
      incrementor = 1
    } else if (e.target.matches("[data-previous]")) {
      incrementor = -1
    }

    if (incrementor == null) return

    const inputs = [...formSteps[currentStep].querySelectorAll("input")]
    const allValid = inputs.every(input => input.reportValidity())
    if (allValid) {
      currentStep += incrementor
      showCurrentStep()
    }
  })

  formSteps.forEach(step => {
    step.addEventListener("animationend", e => {
      formSteps[currentStep].classList.remove("hide")
      e.target.classList.toggle("hide", !e.target.classList.contains("active"))
    })
  })

  function showCurrentStep() {
    formSteps.forEach((step, index) => {
      step.classList.toggle("active", index === currentStep)
    })
  }



  const cities = [
    {
      ID: 1,
      Name: "Shimla",
      geometry: [31.104815, 77.173401],
      rain: 1437,
      days: 84.8,
    },
    {
      ID: 2,
      Name: "Mussorie",
      geometry: [26.03384, -81.67662],
      rain: 1933.9,
      days: 86.2,
    },
    {
      ID: 3,
      Name: "Meerut",
      geometry: [28.984463, 77.706413],
      rain: 833.4,
      days: 37.5,
    },
    {
      ID: 4,
      Name: "Delhi",
      geometry: [28.70406, 77.102493],
      rain: 755.4,
      days: 39.7,
    },
    {
      ID: 5,
      Name: "Jodhpur",
      geometry: [26.238947, 73.024307],
      rain: 325.5,
      days: 18.6,
    },
    {
      ID: 6,
      Name: "Lucknow",
      geometry: [26.846695, 80.946167],
      rain: 908.4,
      days: 45.0,
    },
    {
      ID: 7,
      Name: "Kanpur",
      geometry: [26.449923, 80.331871],
      rain: 804.0,
      days: 39.7,
    },
    {
      ID: 8,
      Name: "Bhopal",
      geometry: [23.259933, 77.412613],
      rain: 1147.5,
      days: 52.4,
    },
    {
      ID: 9,
      Name: "Indore",
      geometry: [22.719568, 75.857727],
      rain: 995.3,
      days: 46.7,
    },
    {
      ID: 10,
      Name: "Ahmedabad",
      geometry: [23.022505, 72.571365],
      rain: 1437.1,
      days: 85.0,
    },
    {
      ID: 11,
      Name: "Rajkot",
      geometry: [22.303894, 70.802162],
      rain: 610.6,
      days: 28.3,
    },
    {
      ID: 12,
      Name: "Aurangabad",
      geometry: [19.876165, 75.343315],
      rain: 813.5,
      days: 46.4,
    },
    {
      ID: 13,
      Name: "Mumbai",
      geometry: [19.075983, 72.877655],
      rain: 2334.6,
      days: 77.2,
    },
    {
      ID: 14,
      Name: "Pune",
      geometry: [18.52043, 73.856743],
      rain: 781.9,
      days: 49.4,
    },
    {
      ID: 15,
      Name: "Kolkata",
      geometry: [22.572645, 88.363892],
      rain: 1765.1,
      days: 84.0,
    },
    {
      ID: 16,
      Name: "Darjeeling",
      geometry: [27.036007, 88.262672],
      rain: 2323.2,
      days: 98.9,
    },
    {
      ID: 17,
      Name: "Guwahati",
      geometry: [26.144518, 91.736237],
      rain: 1758.3,
      days: 91.8,
    },
    {
      ID: 18,
      Name: "Shillong",
      geometry: [25.578773, 91.893257],
      rain: 2269.8,
      days: 113.3,
    },
    {
      ID: 19,
      Name: "Aizwal",
      geometry: [23.727106, 92.717636],
      rain: 2049.7,
      days: 109.7,
    },
    {
      ID: 20,
      Name: "Mangalore",
      geometry: [12.914142, 74.855957],
      rain: 3595,
      days: 111.7,
    },
    {
      ID: 21,
      Name: "Bangalore",
      geometry: [12.971599, 77.594566],
      rain: 8771.8,
      days: 53.2,
    },
    {
      ID: 22,
      Name: "Chennai",
      geometry: [13.08268, 80.270721],
      rain: 1549.9,
      days: 58.6,
    },
    {
      ID: 23,
      Name: "Coimbatore",
      geometry: [11.016844, 76.955833],
      rain: 607.8,
      days: 39.4,
    },
    {
      ID: 24,
      Name: "Madurai",
      geometry: [9.925201, 78.119774],
      rain: 748.9,
      days: 40.1,
    },
    {
      ID: 25,
      Name: "Kochi",
      geometry: [9.931233, 76.267303],
      rain: 1733.5,
      days: 93.5,
    },
    {
      ID: 26,
      Name: "Thiruvanthapuram",
      geometry: [8.524139, 76.936638],
      rain: 1147.5,
      days: 52.4,
    },
    {
      ID: 27,
      Name: "Hyderabad",
      geometry: [17.385044, 78.486671],
      rain: 821.7,
      days: 48.6,
    },
    {
      ID: 28,
      Name: "Puri",
      geometry: [19.80044, 85.826752],
      rain: 1521.9,
      days: 63.9,
    },
  ];


  let html;

  html += `
          <option selected></option>`;
  cities.map((city) => {
    html += `<option value="${city.Name}" onclick="ccity=${city.Name} ${console.log(ccity)}" >${city.Name}</option>`
  });

  function changeLanguage(value) {
    ccity = value;
    console.log(ccity);
  }

  let html2;
  console.log(ccity);
  console.log(val);

  /*
  For calculation we take the following formula: 
  mean annual rainfall in mm x area in m² x runoff factor = collected rainwater in litres.
  In our example this means: 450 x 120 x 0.9 = 48 600 litres.
     
  */

  // let rain=

  let val2=val*0.092;
  let ans=val2*ccity.rain*0.9

  console.log(val2,ccity.rain,"lololoitit");
  console.log(ans);

function change(){ 

   let nccity=cities.filter((city)=>{
     if(city.Name===ccity)
     return city;
   })

  let val2=val*0.092;
  let ans=Math.floor(val2*nccity[0].rain*0.9);

  console.log(nccity);
  console.log(val2,nccity[0].rain,"lololoitit");
  console.log(ans);
  let html2=`<h3>
      Hurray!!
      <br/>
      You saved around ${ans} liters
     </h3>`;

  document.getElementById("lastpage").innerHTML=html2
}



  document.getElementById("inputGroupSelect01").innerHTML = html;

</script>